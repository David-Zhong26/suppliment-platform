"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},95583:(e,r,a)=>{a.r(r),a.d(r,{originalPathname:()=>w,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>R,staticGenerationAsyncStorage:()=>x});var t={};a.r(t),a.d(t,{POST:()=>g});var s=a(49303),n=a(88716),i=a(60670),o=a(87070),u=a(42023),l=a.n(u),m=a(52663),p=a(91585),d=a(26033);let c=p.Ry({name:p.Z_().min(2,"Name must be at least 2 characters"),username:p.Z_().min(3,"Username must be at least 3 characters").regex(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),email:p.Z_().email("Invalid email address"),password:p.Z_().min(8,"Password must be at least 8 characters").regex(/^(?=.*[A-Z])(?=.*[!@#$%^&*])/,"Password must contain at least one capital letter and one special character"),age:p.Rx().min(13).max(120).optional(),gender:p.Km(["male","female","non-binary","prefer-not-to-say"]).optional(),userType:p.Km(["GENERAL_USER","VERIFIED_CREATOR","SELLER"])});async function g(e){try{let r=await e.json(),a=c.parse(r);if(await m._.user.findUnique({where:{email:a.email}}))return o.NextResponse.json({error:"Email already registered"},{status:400});if(await m._.user.findUnique({where:{username:a.username}}))return o.NextResponse.json({error:"Username already taken"},{status:400});let t=await l().hash(a.password,12),s=await m._.user.create({data:{name:a.name,username:a.username,email:a.email,password:t,age:a.age,gender:a.gender,userType:a.userType},select:{id:!0,name:!0,username:!0,email:!0,userType:!0,createdAt:!0}});return"SELLER"===a.userType&&await m._.sellerProfile.create({data:{userId:s.id,businessName:"",contactInfo:"",verificationStatus:"PENDING"}}),o.NextResponse.json({message:"User created successfully",user:s},{status:201})}catch(e){if(console.error("Registration error:",e),e instanceof d.jm)return o.NextResponse.json({error:"Validation failed",details:e.errors},{status:400});return o.NextResponse.json({error:"Internal server error"},{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/davidzhong/Desktop/wellness-platform/app/api/auth/register/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:f,staticGenerationAsyncStorage:x,serverHooks:R}=h,w="/api/auth/register/route";function y(){return(0,i.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:x})}},52663:(e,r,a)=>{a.d(r,{_:()=>s});let t=require("@prisma/client"),s=globalThis.prisma??new t.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[276,776,972,585],()=>a(95583));module.exports=t})();